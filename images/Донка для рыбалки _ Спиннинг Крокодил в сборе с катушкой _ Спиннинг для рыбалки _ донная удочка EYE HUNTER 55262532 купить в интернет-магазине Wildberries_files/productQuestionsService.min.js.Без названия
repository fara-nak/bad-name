(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function asyncGeneratorStep(e,t,r,n,o,a,s){try{var u=e[a](s),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function s(e){asyncGeneratorStep(a,n,o,s,u,"next",e)}function u(e){asyncGeneratorStep(a,n,o,s,u,"throw",e)}s(void 0)})}}!function(){var e="https://questions.wildberries.ru/api/v1",t="product_questions_{0}",r=function(){function r(){}var n=r.prototype;return n.loadQuestionsFromCache=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=this.tryGetFromCache(t))){e.next=3;break}return e.abrupt("return",n);case 3:return e.abrupt("return",this.loadQuestionsAsync(t,r));case 4:case"end":return e.stop()}},e,this)}));return function(t,r){return e.apply(this,arguments)}}(),n.loadQuestionsAsync=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(r,n){var o,a,s=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=s.length>2&&void 0!==s[2]?s[2]:0,t.prev=1,t.next=4,this.$httpClient.fetchJSON("".concat(e,"/questions?").concat(new URLSearchParams({imtId:r,take:n,skip:o})),{method:"GET",headers:{"Content-Type":"applicatopn/json","X-Service-Name":"site"}},{noProcessResponse:!0});case 4:return a=t.sent,t.abrupt("return",a);case 8:return t.prev=8,t.t0=t.catch(1),console.error(t.t0),t.abrupt("return",null);case 12:case"end":return t.stop()}},t,this,[[1,8]])}));return function(e,r){return t.apply(this,arguments)}}(),n.loadQuestionCountAsync=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(r){var n,o,a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$httpClient.fetchJSON("".concat(e,"/questions?").concat(new URLSearchParams({imtId:r,onlyCount:!0})),{method:"GET",headers:{"Content-Type":"applicatopn/json","X-Service-Name":"site"}},{noProcessResponse:!0});case 3:if(t.t1=n=t.sent,t.t0=null!==t.t1,!t.t0){t.next=7;break}t.t0=void 0!==n;case 7:if(!t.t0){t.next=11;break}t.t2=n,t.next=12;break;case 11:t.t2={};case 12:return o=t.t2,a=o.count,s=void 0===a?0:a,t.abrupt("return",s);case 18:return t.prev=18,t.t3=t.catch(0),console.error(t.t3),t.abrupt("return",0);case 22:case"end":return t.stop()}},t,this,[[0,18]])}));return function(e){return t.apply(this,arguments)}}(),n.tryUploadQuestionAsync=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(r,n,o,a){var s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$httpClient.fetchExt("".concat(e,"/question"),{method:"POST",body:JSON.stringify({imtId:r,text:o,goodsName:n,nmId:a}),headers:{"Content-Type":"application/json","X-Service-Name":"site"},credentials:"omit"},{},this._publicResponseProcessor);case 3:return s=t.sent,t.abrupt("return",422!=s.status);case 7:throw t.prev=7,t.t0=t.catch(0),t.t0.isCustomError||console.error(t.t0),t.t0;case 11:case"end":return t.stop()}},t,this,[[0,7]])}));return function(e,r,n,o){return t.apply(this,arguments)}}(),n.saveQuestionsModelToCache=function(e,r){sessionStorage.putObject(String.format(t,e),{model:r,expiredAt:Date.now()+12e4})},n.tryGetFromCache=function(e){try{var r=null,n=sessionStorage.getObject(String.format(t,e));return(null==n?void 0:n.expiredAt)>=Date.now()&&(r=n.model),r}catch(e){return null}},n.dropFromCache=function(e){sessionStorage.removeItem(String.format(t,e))},n._publicResponseProcessor=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=2;break}return e.abrupt("return",t);case 2:return e.next=4,t.text();case 4:if(n=e.sent,422!=t.status){e.next=12;break}if("text not pass review"!=n){e.next=8;break}return e.abrupt("return",t);case 8:if("text contains taboo"!=n){e.next=10;break}return e.abrupt("return",Promise.reject(new KnownServerError("Вопрос не может быть сохранен, так как содержит ненормативную лексику или запрещенные слова")));case 10:if("invalid text length"!=n){e.next=12;break}return e.abrupt("return",Promise.reject(new KnownServerError("В вопросе может быть не более 1000 символов")));case 12:return e.abrupt("return",r(n));case 13:case"end":return e.stop()}},e)}));return function(t,r){return e.apply(this,arguments)}}(),r}();window.__spaServiceManager__.register("productQuestionsService",r)}();

},{}]},{},[1]);
