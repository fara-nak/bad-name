(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function asyncGeneratorStep(e,n,t,i,r,s,u){try{var c=e[s](u),o=c.value}catch(e){return void t(e)}c.done?n(o):Promise.resolve(o).then(i,r)}function _asyncToGenerator(e){return function(){var n=this,t=arguments;return new Promise(function(i,r){var s=e.apply(n,t);function u(e){asyncGeneratorStep(s,i,r,u,c,"next",e)}function c(e){asyncGeneratorStep(s,i,r,u,c,"throw",e)}u(void 0)})}}!function(){var e=require("./statisticManager"),n=function(){function n(n,t,i,r){this.menuContainer=n,this.menu=t,this.menuItems=this.menu.fullMenu.map(function(e){return Object.assign({},e)}),this.banners=i,this.premiumLogos=null!=r?r:[],this.innerMenuContainer=this.menuContainer.querySelector(".j-menu-burger-drop"),this.selectedMenuItem=null,this.innerMenuItems=[],this.shownBanners=new Set,this.statisticManager=new e(this.shownBanners),this.selectedInnerMenuItems={firstPart:null,secondPart:null,back:null},this.menuSelectedHandler=this.menuSelectedHandler.bind(this),this.onDenyLinksClicked=this.onDenyLinksClicked.bind(this),this.menuSelectedHandler=this.menuSelectedHandler.bind(this),this.sendClickMenuLinkEvent=this.sendClickMenuLinkEvent.bind(this),this.sendClickMenuBannerEvent=this.sendClickMenuBannerEvent.bind(this),this.innerMenuHide=this.innerMenuHide.bind(this),this.menuDropItemOpen=this.menuDropItemOpen.bind(this)}var t=n.prototype;return t.getAbsoluteUrl=function(e){return location.origin.indexOf("www.wildberries.by")>=0?"".concat(location.origin).concat(e):-1==e.indexOf("http")||-1==e.indexOf("//")?"".concat(wb.settings.origin).concat(e):e},t.checkMenuItemForHide=function(e,n){var t=this;e.forEach(function(e){Array.isArray(e.dest)&&e.dest.length&&(e.hide=!(null!=n&&n.some(function(n){return e.dest.includes(n)}))),Array.isArray(e.childs)&&e.childs.length&&t.checkMenuItemForHide(e.childs,n)})},t.relinkModel=function(){$.unlink(this.menuContainer),$.link(!0,this.menuContainer,this)},t.findItem=function(e){return this.menuItems.find(function(n){return n.id==e})},t.clearShownBanners=function(){this.shownBanners.clear()},t.menuSelectedHandler=function(e){var n=this;if(e.currentTarget.classList.contains("menu-burger__main-list-item--subcategory")){"click"===e.type&&e.preventDefault();var t=function(e){n.onMenuSelected(e.currentTarget)}.bind(this);this.touchHandlerHelper(e,t)}},t.backLinkHandler=function(e){var n=this,t=function(e){n.innerMenuHide(),n.changeSelectedMenuItem(null)}.bind(this);"click"===e.type?t(e):this.touchHandlerHelper(e,t)},t.tecDocSearchOpen=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.tecdocPopup){e.next=7;break}return e.next=3,this.$moduleLoader.loadModuleAsync("tecDocAuto");case 3:return n=e.sent,this.tecdocPopup=new n,e.next=7,this.tecdocPopup.init(!0);case 7:this.tecdocPopup.openSearchFormPopup();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.categorySelectHandler=function(e){var n=function(e){e.currentTarget.classList.toggle("dropdown-open")}.bind(this);e.target.parentNode===e.currentTarget&&("click"===e.type?(e.preventDefault(),n(e)):this.touchHandlerHelper(e,n))},t.selectedCategoryClicked=function(e){this.$isDesktop||e.preventDefault()},t.sendClickMenuBannerEvent=function(e){this.statisticManager.sendClickMenuBannerEvent(e)},t.sendClickMenuLinkEvent=function(e){var n=this;if(this.$isDesktop||!e.currentTarget.classList.contains("j-menu-drop-link-subcategory")){var t,i,r,s,u,c,o=e.currentTarget.parents(".j-menu-main-item"),a=$.view(e.currentTarget).data;if((null==o?void 0:o.length)>0){t=o[0].dataset.menuId;var l=this.menuItems.find(function(e){return e.id==t});if(!this.$isDesktop&&(l.childs||l.banners))return}else if(!this.$isDesktop){var d=e.currentTarget.closest(".j-menu-drop-link");null!=d&&d.dataset.menuId&&(t=d.dataset.menuId)}if("a"===e.currentTarget.tagName.toLowerCase())i=e.currentTarget.text.trim(),r=null!==(s=null===(u=this.selectedMenuItem)||void 0===u?void 0:u.name)&&void 0!==s?s:"top";e.currentTarget.closest(".j-menu-premium-brands")&&(c="CBP");var h=function(e){n.statisticManager.sendClickMenuLinkEvent(t,i,r,null==a?void 0:a.id,c)}.bind(this);"click"===e.type?h(e):this.touchHandlerHelper(e,h)}},t.menuDropItemOpen=function(e){var n=$.view(e.currentTarget).data;this._setSelectedInnerMenuItems(n)},t.onDenyLinksClicked=function(e){this.$isDesktop&&(e.preventDefault(),e.stopPropagation())},t.onMenuSelected=function(e){var n,t,i=this,r=e.dataset.menuId;if(this.changeSelectedMenuItem(r),this.statisticManager.sendOpenMenuEvent(e,r),this.$isDesktop&&this.$eventBus.dispatchEvent(new CustomEvent("SelectedSideMenuItemUpdated",{detail:{menuId:r}})),null!==(n=this.selectedMenuItem)&&void 0!==n&&n.childs||null!==(t=this.selectedMenuItem)&&void 0!==t&&t.banners)if(this.selectedMenuItem.rendered)this._innerMenuOpen();else{var s=this.innerMenuContainer.querySelector(".j-menu-drop-item-".concat(this.selectedMenuItem.id));$.views.loadTemplateDictionaryAsync("menuTopTmpl").then(function(){var e=$.templates.menuInnerItemsTmpl.link(s,i.selectedMenuItem,i);i.innerMenuItems.push(e[0]),i.selectedMenuItem.rendered=!0,i._innerMenuOpen()})}else this.innerMenuHide()},t.changeSelectedMenuItem=function(e){var n=null;if(e){var t,i=null===(t=this.menuItems)||void 0===t?void 0:t.find(function(n){return n.id==e});i&&(n=i)}!n||n.rendered||n.banners||(n.banners=!!this.banners&&this.banners[e]),$.observable(this).setProperty({selectedMenuItem:n})},t.innerMenuHide=function(){this.innerMenuContainer.querySelectorAll(".dropdown-open").forEach(function(e){var n;null===(n=e.classList)||void 0===n||n.remove("dropdown-open")})},t.touchHandlerHelper=function(e,n){var t,i;e.preventDefault();var r=e.currentTarget,s="touchstart"===e.type?(null===(t=e.changedTouches)||void 0===t?void 0:t.length)>0&&e.changedTouches[0].clientX:e.clientX,u="touchstart"===e.type?(null===(i=e.changedTouches)||void 0===i?void 0:i.length)>0&&e.changedTouches[0].clientY:e.clientY,c="touchstart"===e.type?"touchend":"mouseup";r.addEventListener(c,function e(t){var i,o;r.removeEventListener(c,e);var a="touchend"===t.type?(null===(i=t.changedTouches)||void 0===i?void 0:i.length)>0&&t.changedTouches[0].clientX:t.clientX,l="touchend"===t.type?(null===(o=t.changedTouches)||void 0===o?void 0:o.length)>0&&t.changedTouches[0].clientY:t.clientY,d=s-a+u-l;Math.abs(d)<=4&&n(t)})},t.isCommonMenuItem=function(e){return 4853!=e&&9540!=e&&63451!=e&&128297!=e&&2192!=e},t._innerMenuOpen=function(){var e=this;this._setSelectedInnerMenuItems(this.selectedMenuItem);var n=this._filterNodeItem(this.innerMenuItems,function(n){return n.dataset.menuId==e.selectedMenuItem.id}),t=n.querySelectorAll(".j-menu-inner-column");null==t||t.forEach(function(e){e.scrollTop=0}),this._showImages(n).then(function(){e.statisticManager.bindBannerClickListener(),e.statisticManager.bindBannerShowListener(n)})},t._showImages=function(e){var n=[];return e.querySelectorAll(".j-menu-image").forEach(function(e){var t;n.push((t=e,new Promise(function(e,n){var i=t.dataset.src;i!==t.src&&(t.onload=function(){e()},t.onerror=function(){n()},t.src=i)})))}),Promise.all(n)},t._filterNodeItem=function(e,n){var t;return e.forEach(function(e){if(n&&n(e))return t=e,e}),t},t._setSelectedInnerMenuItems=function(e){var n,t,i,r,s=this._getSelectedInnerMenuItems(e);(null===(n=this.selectedInnerMenuItems.firstPart)||void 0===n?void 0:n.id)==(null===(t=s.firstPart)||void 0===t?void 0:t.id)&&(null===(i=this.selectedInnerMenuItems.secondPart)||void 0===i?void 0:i.id)==(null===(r=s.secondPart)||void 0===r?void 0:r.id)||($.observable(this.selectedInnerMenuItems).setProperty({firstPart:null,secondPart:null,back:null}),$.observable(this.selectedInnerMenuItems).setProperty(s))},t._getSelectedInnerMenuItems=function(e){var n,t={firstPart:null,secondPart:null,back:null};return this.isCommonMenuItem(this.selectedMenuItem.id)?this.$isDesktop?this.selectedMenuItem.id==e.id?(t.firstPart=this.selectedMenuItem,t):(t.firstPart=e.parentId?this.menu.menuById.get(e.parentId):null,t.secondPart=e,t.back=null!==(n=t.firstPart)&&void 0!==n&&n.parentId?this.menu.menuById.get(t.firstPart.parentId):null,t):(t.firstPart=e,t.back=e.parentId?this.menu.menuById.get(e.parentId):"main",t):t},n}();window.__spaModuleManager__.register("sideMenu",n)}();

},{"./statisticManager":2}],2:[function(require,module,exports){
"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(t,n){if(t){if("string"==typeof t)return _arrayLikeToArray(t,n);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(t,n):void 0}}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayLikeToArray(t,n){(null==n||n>t.length)&&(n=t.length);for(var a=0,e=new Array(n);a<n;a++)e[a]=t[a];return e}var MAGNIT_MENU_ID=128603,StatisticManger=function(){function t(t){this.shownBanners=t}var n=t.prototype;return n.sendClickMenuLinkEvent=function(t,n,a,e,r){wb.analitics.saveState({l:null!=r?r:"CCC",t:null!=e?e:t}),t==MAGNIT_MENU_ID&&wb.analitics.sendEvent("Catalog_Magnit_T",{}),wb.analitics.sendEvent("Catalog_Category_T",{name:n,parent_name:a})},n.sendClickMenuBannerEvent=function(t){var n=t.currentTarget;wb.analitics.saveState({l:n.dataset.analiticsCode})},n.sendMenuItemShownEvent=function(t){if(t&&0!=t.length){var n=_toConsumableArray(t).find(function(t){return t.dataset.menuId==MAGNIT_MENU_ID});n&&!n.classList.contains("hide")&&wb.analitics.sendEvent("Catalog_Magnit_S",{})}},n.sendOpenMenuEvent=function(t,n){if(null!=n){if(!t.dataset.shownStatSent){t.dataset.shownStatSent=!0;var a=[];a.push(wb.stat.wrapParam("MId",n)),a.push(wb.stat.wrapParam("MT","top-menu")),wb.stat.sendEvent("MO",a,!0)}}},n.bindBannerClickListener=function(){wb.stat.banners.initClickEvent()},n.bindBannerShowListener=function(t){if(!this.shownBanners.has(t)){this.shownBanners.add(t);var n=t.querySelectorAll(".j-banner");n.forEach(function(t){wb.stat.banners.sendShownStatistic(t),t.classList.contains("j-banner-wba")&&wb.analitics.sendBannersWbaEvent("Banner_S",t.title,t.dataset.analiticsCode,t.href,t.dataset.bannerIndex,t.dataset.bannerId)}),t.dataset.wbaBnrBlockStatSent||(t.dataset.wbaBnrBlockStatSent=!0,wb.analitics.bannerBlockStatForLoadWba(n))}},t}();module.exports=StatisticManger;

},{}]},{},[1]);
