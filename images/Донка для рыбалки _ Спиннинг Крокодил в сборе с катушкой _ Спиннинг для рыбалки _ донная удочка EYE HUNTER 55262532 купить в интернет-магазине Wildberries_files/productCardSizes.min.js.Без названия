(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";function _toArray(e){return _arrayWithHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}!function(){var e=function(){function e(e,t,i){var r,n,s,o,a;this.id=this.$generateGuid(),this.parentId=e,this.nmId=t.nmId,this.showSize=t.showSize,this.sizes=null!==(r=null===(n=t.sizes)||void 0===n?void 0:n.map(function(e){return e}))&&void 0!==r?r:[],this.sizeTable=null!==(s=null===(o=t.sizeTable)||void 0===o?void 0:o.map(function(e){return e}))&&void 0!==s?s:[],this.selectedChrtId=null===(a=t.selectedSize)||void 0===a?void 0:a.characteristicId,this.showAllSizes=null!=t.selectedSize,this.allSizesShown=null!=t.selectedSize,this.deliveryInfoHelper=i,this.blinkSizes=!1,this.onSizeUpdated=this.onSizeUpdated.bind(this),this.onColorChanged=this.onColorChanged.bind(this)}var t=e.prototype;return t.init=function(){return this._bindEvents(),this},t.destroy=function(){this._unbindEvents()},t.onSizeUpdated=function(e){var t=e.detail,i=t.nmId,r=t.selectedSize;i==this.nmId&&$.observable(this).setProperty({selectedChrtId:r})},t.onColorChanged=function(e){var t,i,r,n,s=this,o=e.detail,a=o.sourceId,l=o.sourceNmId,d=o.selectedNomenclature;a==this.parentId&&l==this.nmId&&($.observable(this).setProperty({nmId:d.nmId,showSize:d.showSize,selectedChrtId:null===(t=d.selectedSize)||void 0===t?void 0:t.characteristicId,showAllSizes:null!=d.selectedSize,allSizesShown:null!=d.selectedSize,blinkSizes:!1}),$.observable(this.sizeTable).refresh(null!==(i=null===(r=d.sizeTable)||void 0===r?void 0:r.map(function(e){return e}))&&void 0!==i?i:[]),$.observable(this.sizes).refresh(null!==(n=d.sizes)&&void 0!==n?n:[]),this.$helper.nextTick().then(function(){return s.checkSizeList()}))},t.updateSize=function(e){var t=$.view(e.currentTarget).data;t&&this.$eventBus.dispatchEvent(new CustomEvent("ProductSizeUpdated",{detail:{nmId:this.nmId,selectedSize:t.characteristicId}}))},t.validateSize=function(){return!this.showSize||null!=this.selectedChrtId},t.blinkSize=function(){$.observable(this).setProperty({blinkSizes:!0})},t.removeBlink=function(){$.observable(this).setProperty({blinkSizes:!1})},t.toggleSizes=function(){$.observable(this).setProperty({showAllSizes:!1,allSizesShown:!0})},t.checkSizeList=function(){var e=document.getElementById(this.id);null!=e&&$.observable(this).setProperty({showAllSizes:e.scrollHeight-e.clientHeight>40})},t.showTableOfSizes=function(){var e=this,t=_toArray(this.sizeTable),i=t[0],r=t.slice(1),n=Object.values(this.sizes).reduce(function(e,t){return(e[t.characteristicId]={chrtId:t.characteristicId,sizeName:t.sizeName})&&e},{});r=r.filter(function(e){return null!=n[e.chrtId]}),this.$moduleLoader.loadModuleAsync("sizeTable").then(function(t){t.showSizeTablePopup(e.nmId,e.sizes.find(function(t){return t.characteristicId==e.selectedChrtId}),i,r,n,e.statCardWba)})},t._bindEvents=function(){this.$eventBus.addEventListener("ProductSizeUpdated",this.onSizeUpdated),this.$eventBus.addEventListener("ProductColorChanged",this.onColorChanged),this.$eventBus.addEventListener("ProductChanged",this.onColorChanged)},t._unbindEvents=function(){this.$eventBus.removeEventListener("ProductSizeUpdated",this.onSizeUpdated),this.$eventBus.removeEventListener("ProductColorChanged",this.onColorChanged),this.$eventBus.removeEventListener("ProductChanged",this.onColorChanged)},_createClass(e,[{key:"template",get:function(){return e.template}}]),e}();window.__spaModuleManager__.register("productCardSizes",e)}();

},{}]},{},[1]);
